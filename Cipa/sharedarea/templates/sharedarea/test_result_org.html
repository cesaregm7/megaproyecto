{% extends 'index.html' %}
{% load static %}
{% block head %}
        <link rel="stylesheet" media="all" type="text/css" href="{% static 'styles/test_organizacional.css' %}" >
{% endblock %}


{% block contenido %}

<script src="https://www.amcharts.com/lib/3/amcharts.js"></script>
<script src="https://www.amcharts.com/lib/3/serial.js"></script>
<script src="https://www.amcharts.com/lib/3/plugins/export/export.min.js"></script>
<link rel="stylesheet" href="https://www.amcharts.com/lib/3/plugins/export/export.css" type="text/css" media="all" />
<script src="https://www.amcharts.com/lib/3/themes/light.js"></script>

<div class="container">
  <div class="row">
    <div class="col-lg-6 col-lg-offset-4 col-xs-8 col-xs-offset-2">
      <h2>{{title}}</h2>
    </div>
  </div>
  <div class="row">
      <div class="col-lg-8 col-lg-offset-2"> 
        <div class="chartdiv" id="chartdiv"></div>
      </div>
    </div>
  <div class="row">
    <div class="well">
      <h4>Temas Evaluados</h4>
    <br>
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>Tema</th>
          <th>Descripci&oacute;n</th>
        </tr>
      </thead>
      <tbody>
        {% for item in results %}
          <tr>
            <td>{{item.0}}</td>
            <td>{{item.1}}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
    </div>
  </div>
  <div class="well">
    <div class="row">
      <div class="col-lg-6 col-lg-offset-4 col-xs-8 col-xs-offset-2">
        <h4>Resultado al terminar la prueba: <strong>{{screening}}</strong></h4>
      </div>
    </div>
  </div>
<br>
</div>

	     {% if idTest == 1 %}
      <script>
      	var answers = {{answers}};
        var chart = AmCharts.makeChart("chartdiv", {
        "type": "serial",
        "theme": "light",
        "marginRight": 70,
        "dataProvider": [{
          "country": "Aislamiento Social",
          "visits": answers[0],
          "color": "#FF0F00"
        }, {
          "country": "Exigencia Extrema",
          "visits": answers[1],
          "color": "#FF6600"
        }, {
          "country": "Desacreditación",
          "visits": answers[2],
          "color": "#FF9E01"
        }, {
          "country": "Politica Organizacional",
          "visits": answers[3],
          "color": "#FCD202"
        }, {
          "country": "Informacion y Actuaciones ante el acoso",
          "visits": answers[4],
          "color": "#F8FF01"
        }, {
          "country": "Consecuencias",
          "visits": answers[5],
          "color": "#B0DE09"
        }],
        "valueAxes": [{
          "axisAlpha": 0,
          "position": "left",
          "title": "Total"
        }],
        "startDuration": 1,
        "graphs": [{
          "balloonText": "<b>[[category]]: [[value]]</b>",
          "fillColorsField": "color",
          "fillAlphas": 0.9,
          "lineAlpha": 0.2,
          "type": "column",
          "valueField": "visits"
        }],
        "chartCursor": {
          "categoryBalloonEnabled": false,
          "cursorAlpha": 0,
          "zoomable": false
        },
        "categoryField": "country",
        "categoryAxis": {
          "gridPosition": "start",
          "labelRotation": 45
        },
        "export": {
          "enabled": false
        }

      });
      </script>
      		
      {% elif idTest == 2 %}

      <script>
      	var answers = {{answers}};
        var chart = AmCharts.makeChart("chartdiv", {
        "type": "serial",
        "theme": "light",
        "marginRight": 70,
        "dataProvider": [{
          "country": "Autonomía",
          "visits": answers[0],
          "color": "#FF0F00"
        }, {
          "country": "Cohesión",
          "visits": answers[1],
          "color": "#FF6600"
        }, {
          "country": "Confianza",
          "visits": answers[2],
          "color": "#FF9E01"
        }, {
          "country": "Presión",
          "visits": answers[3],
          "color": "#FCD202"
        }, {
          "country": "Apoyo",
          "visits": answers[4],
          "color": "#F8FF01"
        }, {
          "country": "Reconocimiento",
          "visits": answers[5],
          "color": "#B0DE09"
        }, {
          "country": "Equidad",
          "visits": answers[6],
          "color": "#04D215"
        }, {
          "country": "Innovacion",
          "visits": answers[7],
          "color": "#0D8ECF"
        }],
        "valueAxes": [{
          "axisAlpha": 0,
          "position": "left",
          "title": "Total"
        }],
        "startDuration": 1,
        "graphs": [{
          "balloonText": "<b>[[category]]: [[value]]</b>",
          "fillColorsField": "color",
          "fillAlphas": 0.9,
          "lineAlpha": 0.2,
          "type": "column",
          "valueField": "visits"
        }],
        "chartCursor": {
          "categoryBalloonEnabled": false,
          "cursorAlpha": 0,
          "zoomable": false
        },
        "categoryField": "country",
        "categoryAxis": {
          "gridPosition": "start",
          "labelRotation": 45
        },
        "export": {
          "enabled": false
        }

      });
      </script>

      {% elif idTest == 3 %}
      <script>
      	var answers = {{answers}};
        var chart = AmCharts.makeChart("chartdiv", {
        "type": "serial",
        "theme": "light",
        "marginRight": 70,
        "dataProvider": [{
          "country": "Cansancio Emocional",
          "visits": answers[0],
          "color": "#FF0F00"
        }, {
          "country": "Despersonalización",
          "visits": answers[1],
          "color": "#FF6600"
        }, {
          "country": "Realización Personal",
          "visits": answers[2],
          "color": "#FF9E01"
        }],
        "valueAxes": [{
          "axisAlpha": 0,
          "position": "left",
          "title": "Total"
        }],
        "startDuration": 1,
        "graphs": [{
          "balloonText": "<b>[[category]]: [[value]]</b>",
          "fillColorsField": "color",
          "fillAlphas": 0.9,
          "lineAlpha": 0.2,
          "type": "column",
          "valueField": "visits"
        }],
        "chartCursor": {
          "categoryBalloonEnabled": false,
          "cursorAlpha": 0,
          "zoomable": false
        },
        "categoryField": "country",
        "categoryAxis": {
          "gridPosition": "start",
          "labelRotation": 45
        },
        "export": {
          "enabled": false
        }

      });
      </script>


{% endif %}

{% endblock %}
